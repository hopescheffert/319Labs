<!-- login.html
- use ajax call to /checkLogin.php file to check user/password
– on success go to viewPosts.php
– on failure – ask the user to correct the username and password
-->
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body>
    <!-- is this a form or not? -->
    <form action="checkLogin.php" enctype="multipart/form-data" method="GET">
        Username<br><input type="text" id="username" name="usernameField" /><br>
        Password<br><input type="password" id="password" name="passwordField" /><br>
        <input type="submit" id="login" value="Login"/>
        <div id="myDiv"></div>
    </form>

        <script>
        var loginButton = $("#login");
        var user = $("#username");
        var pass = $("#password");
        //AJAX CALL TO checkLogin.php TO CHECK USER/PASSWORD
        loginButton.click(function()
        {
            $.get("checkLogin.php?username=" + user + "&password=" + pass,
            function(data)
            {
                alert(data);
                alert(JSON.parse(data)); //TODO why doesn't this work?

                var result = JSON.parse(data);
                alert(result);

                if(result->"success" == false)  //TODO ON FAILURE: ASK THE USER TO CORRECT THE USERNAME AND PASSWORD
                {
                    //failed
                    window.location = "login.html";
                    alert("Error: Incorrect username and/or password");
                }
                else {
                    // ON SUCCESS GO TO VIEWPOSTS.php
                    window.location = "viewPosts.php";
                }

            });
        });


        </script>


    </body>


    </html>
