<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-route.js"></script>

<body ng-app="myApp">

    <p><a href="#/">Main</a></p>
    <a href="#first">Class 1</a>
    <a href="#second">Class 2</a>
    <a href="#third">Class 3</a>


    <div ng-view></div>

    <script>
    var app = angular.module("myApp", ["ngRoute"]);
    app.config(function($routeProvider) {
        $routeProvider
        .when("/", {
            templateUrl : "main.html"
        })
        .when("/first", {
            templateUrl : "first.html"
        })
        .when("/second", {
            templateUrl : "second.html"
        })
        .when("/third", {
            templateUrl : "third.html"
        });
    });

    // $rootScope.$on("$routeChangeStart", function (event, next, current) {
    //     if (sessionStorage.restorestate == "true") {
    //         $rootScope.$broadcast('restorestate'); //let everything know we need to restore state
    //         sessionStorage.restorestate = false;
    //     }
    // });
    //
    // //let everthing know that we need to save state now.
    // window.onbeforeunload = function (event) {
    //     $rootScope.$broadcast('savestate');
    // };


    // app.factory('listService', ['$rootScope', function ($rootScope) {
    //
    //     var service = {
    //         model: {
    //             stuff: []
    //         },
    //
    //         SaveState: function () {
    //             sessionStorage.listService = angular.toJson(service.model);
    //         },
    //
    //         RestoreState: function () {
    //             service.model = angular.fromJson(sessionStorage.listService);
    //         }
    //     }
    //
    //     $rootScope.$on("savestate", service.SaveState);
    //     $rootScope.$on("restorestate", service.RestoreState);
    //
    //     return service;
    // }]);


    app.controller("myListCtrl1", function($scope)//, listService)
    {
        if(localStorage.getItem("stuff1") == null)
        {
            $scope.stuff = [];
        }
        else
        {
            $scope.stuff = JSON.parse(localStorage.getItem("stuff1"));//listService;
        }
        //adds the task to the to do list at the end
        $scope.addTask = function()
        {
            $scope.error = "";
            if(!$scope.addThis)
            {
                return;
            }
            if($scope.stuff.indexOf($scope.addThis) == -1)
            {
                $scope.stuff.push($scope.addThis);
                localStorage.setItem("stuff1", JSON.stringify($scope.stuff));
            }
            else
            {
                $scope.error = "You have already added this task";
            }
        }
        //removes the task at the specified index x
        $scope.removeTask = function(x)
        {
            $scope.error = "";
            $scope.stuff.splice(x, 1);
            localStorage.setItem("stuff1", JSON.stringify($scope.stuff));
        }
    })
    app.controller("myListCtrl2", function($scope)
    {
        if(localStorage.getItem("stuff2") == null)
        {
            $scope.stuff = [];
        }
        else
        {
            $scope.stuff = JSON.parse(localStorage.getItem("stuff2"));//listService;
        }
        //adds the task to the to do list at the end
        $scope.addTask = function()
        {
            $scope.error = "";
            if(!$scope.addThis)
            {
                return;
            }
            if($scope.stuff.indexOf($scope.addThis) == -1)
            {
                $scope.stuff.push($scope.addThis);
                localStorage.setItem("stuff2", JSON.stringify($scope.stuff));
            }
            else
            {
                $scope.error = "You have already added this task";
            }
        }
        //removes the task at the specified index x
        $scope.removeTask = function(x)
        {
            $scope.error = "";
            $scope.stuff.splice(x, 1);
            localStorage.setItem("stuff2", JSON.stringify($scope.stuff));
        }
    })

    app.controller("myListCtrl3", function($scope)
    {
        if(localStorage.getItem("stuff3") == null)
        {
            $scope.stuff = [];
        }
        else
        {
            $scope.stuff = JSON.parse(localStorage.getItem("stuff3"));//listService;
        }
        //adds the task to the to do list at the end
        $scope.addTask = function()
        {
            $scope.error = "";
            if(!$scope.addThis)
            {
                return;
            }
            if($scope.stuff.indexOf($scope.addThis) == -1)
            {
                $scope.stuff.push($scope.addThis);
                localStorage.setItem("stuff3", JSON.stringify($scope.stuff));

            }
            else
            {
                $scope.error = "You have already added this task";
            }
        }
        //removes the task at the specified index x
        $scope.removeTask = function(x)
        {
            $scope.error = "";
            $scope.stuff.splice(x, 1);
            localStorage.setItem("stuff3", JSON.stringify($scope.stuff));
        }
    })





    </script>

</body>
</html>
